{{!-- ****SERVICE SECTION**** --}}
{{regmap 'typephp' 'boolean:bool;integer,integer64:int;float:float;string:string;enums:int' ~}}

<?php
/*
* Generate info - version php: {{vars.ver}}
*/
{{!-- ****IMPORT SECTION**** --}}
namespace {{to-ns namespace '/' "\^" 'firstupper'}};

{{#each imports}}
{{#ifmodeltype type 'models' @root}}
use {{to-ns (impfileto-ns file) '/' "\^"  'firstupper'}}\\{{type}}Interface;
{{else}}
use {{to-ns (impfileto-ns file) '/' "\^"  'firstupper'}}\\{{type}};
{{/ifmodeltype}}
{{/each}}
{{!-- ****CONST SECTION**** --}}
{{#each consts}}
{{#if description}}
/**
 * {{{ description }}}
 */
{{/if}}
interface {{name}}
{
  {{#each items }}
  {{#if description}}
  /**
   * {{{ description }}}
   */
  {{/if}}
  const {{name}} = {{#val value "'"}}{{/val}};
  {{/each}}
}

{{/each}}
{{!-- ****ENUMS SECTION**** --}}
{{#each enums}}
{{#if description}}
/**
 * {{{ description }}}
 */
{{/if}}
interface {{name}}
{
  {{#each items }}
  {{#if description}}
  /**
   * @var int {{{ description }}}
   */
  {{/if}}
  const {{name}} = {{#val value "'"}}{{/val}};
  {{/each}}
}

{{/each}}
{{!-- ****MODEL SECTION**** --}}
{{#each models}}
/**
 * {{{ description }}}
{{#each items}}
 * @property {{map 'typephp' type}} ${{name}} {{#if required}}Required. {{else}}Optional. {{/if}}{{#ifmodeltype type 'enums' @root}}Use interface {{type}}. {{/ifmodeltype}}{{{ description }}}
{{/each}}
 */
interface {{ name }}Interface{{#if basetype}} extends {{basetype}}Interface {{/if}}
{
  function __get($val);
  function __set($key, $value);
}

class {{ name }} implements {{ name }}Interface
{
  public function __get($key)
  {
      return $this->$key;
  }

  public function __set($key, $value)
  {
      $this->$key = $value;
  }
}

{{/each}}
{{!-- ****CONTRACT SECTION**** --}}
{{#each contracts}}
{{#if description}}
/**
 * {{{ description }}}
 */
{{/if}}
interface {{ name }}{{#if basetype}} extends {{basetype}} {{/if}}
{
  {{#each methods}}
  /**
   * {{{ description }}}
   *
   {{#each args}}
   * @param {{map 'typephp' type}} ${{name}} {{description}}
   {{/each}}
   {{#if result}}* @return {{map 'typephp' result.type}} {{result.description}}{{/if}}
   */
  function {{name}}({{#each args}}{{#if @index}}, {{/if}}{{#php7 @root.vars.ver}}{{map 'typephp' type}} {{/php7}}${{name}}{{/each}}){{#resphp result @root.vars.ver}}: {{map 'typephp' result.type}}{{/resphp}};
  {{/each}}
}
{{/each}}
